<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Editar Persona</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="container mt-5">

  <h1 class="mb-4">Editar Persona</h1>

  <form action="{{ url_for('editar_persona', id=persona.id) }}" method="post" class="needs-validation" novalidate>
    <div class="mb-3">
      <label for="rut" class="form-label">RUT</label>
      <input type="text" id="rut" name="rut" class="form-control" value="{{ persona.rut }}" required pattern="^[0-9kK\.\-]+$" />
      <div class="invalid-feedback">Por favor, ingresa un RUT válido.</div>
    </div>

    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre</label>
      <input type="text" id="nombre" name="nombre" class="form-control" value="{{ persona.nombre }}" required />
      <div class="invalid-feedback">Por favor, ingresa el nombre.</div>
    </div>

    <div class="mb-3">
      <label for="apellido" class="form-label">Apellido</label>
      <input type="text" id="apellido" name="apellido" class="form-control" value="{{ persona.apellido }}" required />
      <div class="invalid-feedback">Por favor, ingresa el apellido.</div>
    </div>

    <div class="mb-3">
      <label for="religion" class="form-label">Religión</label>
      <input type="text" id="religion" name="religion" class="form-control" placeholder="No mostramos el valor actual" required />
      <div class="invalid-feedback">Por favor, ingresa la religión.</div>
    </div>

    <button type="submit" class="btn btn-primary">Actualizar</button>
    <a href="{{ url_for('listar_personas') }}" class="btn btn-secondary">Cancelar</a>
  </form>

  <script>
    // Bootstrap validation
    (function () {
      'use strict';
      var forms = document.querySelectorAll('.needs-validation')
      Array.prototype.slice.call(forms).forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
          form.classList.add('was-validated')
        }, false)
      })
    })()
  </script>

</body>
</html>
